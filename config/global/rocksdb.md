| Name | Desc | Level | Type | non-Daemon Default | Daemon Default | Min | Max | Valid Values | verbatim | See also | Flags | Services | Validator | Long Desc | Tags |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span id="SP_rocksdb_block_size">rocksdb_block_size</span> |   | Advanced | Size | 4_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_bloom_bits_per_key">rocksdb_bloom_bits_per_key</span> |  Number of bits per key to use for RocksDB's bloom filters. | Advanced | Uint | 20 |  |  |  |  |  |  |  |  |  | RocksDB bloom filters can be used to quickly answer the question of whether or not a key may exist or definitely does not exist in a given RocksDB SST file without having to read all keys into memory.  Using a higher bit value decreases the likelihood of false positives at the expense of additional disk space and memory consumption when the filter is loaded into RAM.  The current default value of 20 was found to provide significant performance gains when getattr calls are made (such as during new object creation in bluestore) without significant memory overhead or cache pollution when combined with rocksdb partitioned index filters.  See: https://github.com/facebook/rocksdb/wiki/Partitioned-Index-Filters for more information. |  |
| <span id="SP_rocksdb_cache_index_and_filter_blocks">rocksdb_cache_index_and_filter_blocks</span> |  Whether to cache indices and filters in block cache | Dev | Bool | True |  |  |  |  |  |  |  |  |  | By default RocksDB will load an SST file's index and bloom filters into memory when it is opened and remove them from memory when an SST file is closed.  Thus, memory consumption by indices and bloom filters is directly tied to the number of concurrent SST files allowed to be kept open.  This option instead stores cached indicies and filters in the block cache where they directly compete with other cached data.  By default we set this option to true to better account for and bound rocksdb memory usage and keep filters in memory even when an SST file is closed. |  |
| <span id="SP_rocksdb_cache_index_and_filter_blocks_with_high_priority">rocksdb_cache_index_and_filter_blocks_with_high_priority</span> |  Whether to cache indices and filters in the block cache with high priority | Dev | Bool | False |  |  |  |  |  |  |  |  |  | A downside of setting rocksdb_cache_index_and_filter_blocks to true is that regular data can push indices and filters out of memory.  Setting this option to true means they are cached with higher priority than other data and should typically stay in the block cache. |  |
| <span id="SP_rocksdb_cache_row_ratio">rocksdb_cache_row_ratio</span> |   | Advanced | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_cache_shard_bits">rocksdb_cache_shard_bits</span> |   | Advanced | Int | 4 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_cache_size">rocksdb_cache_size</span> |   | Advanced | Size | 512_M |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_rocksdb_cache_type">rocksdb_cache_type</span> |   | Advanced | Str | binned_lru |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_collect_compaction_stats">rocksdb_collect_compaction_stats</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_collect_extended_stats">rocksdb_collect_extended_stats</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_collect_memory_stats">rocksdb_collect_memory_stats</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_delete_range_threshold">rocksdb_delete_range_threshold</span> |  The number of keys required to invoke DeleteRange when deleting muliple keys. | Advanced | Uint | 1_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_index_type">rocksdb_index_type</span> |  Type of index for SST files: binary_search, hash_search, two_level | Dev | Str | binary_search |  |  |  |  |  |  |  |  |  | This option controls the table index type.  binary_search is a space efficient index block that is optimized for block-search-based index. hash_search may improve prefix lookup performance at the expense of higher disk and memory usage and potentially slower compactions.  two_level is an experimental index type that uses two binary search indexes and works in conjunction with partition filters.  See: http://rocksdb.org/blog/2017/05/12/partitioned-index-filter.html |  |
| <span id="SP_rocksdb_log_to_ceph_log">rocksdb_log_to_ceph_log</span> |   | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_metadata_block_size">rocksdb_metadata_block_size</span> |  The block size for index partitions. (0 = rocksdb default) | Dev | Size | 4_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_partition_filters">rocksdb_partition_filters</span> |  (experimental) partition SST index/filters into smaller blocks | Dev | Bool | False |  |  |  |  |  |  |  |  |  | This is an experimental option for rocksdb that works in conjunction with two_level indices to avoid having to keep the entire filter/index in cache when cache_index_and_filter_blocks is true.  The idea is to keep a much smaller top-level index in heap/cache and then opportunistically cache the lower level indices.  See: https://github.com/facebook/rocksdb/wiki/Partitioned-Index-Filters |  |
| <span id="SP_rocksdb_perf">rocksdb_perf</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_rocksdb_pin_l0_filter_and_index_blocks_in_cache">rocksdb_pin_l0_filter_and_index_blocks_in_cache</span> |  Whether to pin Level 0 indices and bloom filters in the block cache | Dev | Bool | False |  |  |  |  |  |  |  |  |  | A downside of setting rocksdb_cache_index_and_filter_blocks to true is that regular data can push indices and filters out of memory.  Setting this option to true means that level 0 SST files will always have their indices and filters pinned in the block cache. |  |
