| Name | Desc | Level | Type | non-Daemon Default | Daemon Default | Min | Max | Valid Values | verbatim | See also | Flags | Services | Validator | Long Desc | Tags |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span id="SP_bluestore_2q_cache_kin_ratio">bluestore_2q_cache_kin_ratio</span> |  2Q paper suggests .5 | Dev | Float | 0.5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_2q_cache_kout_ratio">bluestore_2q_cache_kout_ratio</span> |  2Q paper suggests .5 | Dev | Float | 0.5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_alloc_stats_dump_interval">bluestore_alloc_stats_dump_interval</span> |  The period (in second) for logging allocation statistics. | Dev | Float | 1_day |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_allocation_from_file">bluestore_allocation_from_file</span> |  Remove allocation info from RocksDB and store the info in a new allocation file | Dev | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_allocator">bluestore_allocator</span> |  Allocator policy | Advanced | Str | hybrid |  |  |  | ["bitmap", "stupid", "avl", "hybrid", "zoned"] |  |  |  |  |  | Allocator to use for bluestore.  Stupid should only be used for testing. |  |
| <span id="SP_bluestore_avl_alloc_bf_free_pct">bluestore_avl_alloc_bf_free_pct</span> |  Sets threshold at which shrinking free space (in %, integer) triggers enabling best-fit mode. | Dev | Uint | 4 |  |  |  |  |  | [[bluestore_avl_alloc_bf_threshold](~/global/bluestore.md#SP_bluestore_avl_alloc_bf_threshold)] |  |  |  | AVL allocator works in two modes: near-fit and best-fit. By default, it uses very fast near-fit mode, in which it tries to fit a new block near the last allocated block of similar size. The second mode is much slower best-fit mode, in which it tries to find an exact match for the requested allocation. This mode is used when either the device gets fragmented or when it is low on free space. When free space is smaller than 'bluestore_avl_alloc_bf_free_pct', best-fit mode is used. |  |
| <span id="SP_bluestore_avl_alloc_bf_threshold">bluestore_avl_alloc_bf_threshold</span> |  Sets threshold at which shrinking max free chunk size triggers enabling best-fit mode. | Dev | Uint | 128_K |  |  |  |  |  | [[bluestore_avl_alloc_bf_free_pct](~/global/bluestore.md#SP_bluestore_avl_alloc_bf_free_pct)] |  |  |  | AVL allocator works in two modes: near-fit and best-fit. By default, it uses very fast near-fit mode, in which it tries to fit a new block near the last allocated block of similar size. The second mode is much slower best-fit mode, in which it tries to find an exact match for the requested allocation. This mode is used when either the device gets fragmented or when it is low on free space. When the largest free block is smaller than 'bluestore_avl_alloc_bf_threshold', best-fit mode is used. |  |
| <span id="SP_bluestore_avl_alloc_ff_max_search_bytes">bluestore_avl_alloc_ff_max_search_bytes</span> |  Maximum distance to search in first-fit mode before switching over to to best-fit mode. 0 to iterate through all ranges for required chunk. | Dev | Size | 16_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_avl_alloc_ff_max_search_count">bluestore_avl_alloc_ff_max_search_count</span> |  Search for this many ranges in first-fit mode before switching over to to best-fit mode. 0 to iterate through all ranges for required chunk. | Dev | Uint | 100 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_bitmapallocator_blocks_per_zone">bluestore_bitmapallocator_blocks_per_zone</span> |   | Dev | Size | 1_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_bitmapallocator_span_size">bluestore_bitmapallocator_span_size</span> |   | Dev | Size | 1_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_blobid_prealloc">bluestore_blobid_prealloc</span> |  Number of unique blob ids to preallocate at a time | Dev | Uint | 10_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_block_create">bluestore_block_create</span> |  Create bluestore_block_path if it doesn't exist | Dev | Bool | True |  |  |  |  |  | [[bluestore_block_path](~/global/bluestore.md#SP_bluestore_block_path), [bluestore_block_size](~/global/bluestore.md#SP_bluestore_block_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_db_create">bluestore_block_db_create</span> |  Create bluestore_block_db_path if it doesn't exist | Dev | Bool | False |  |  |  |  |  | [[bluestore_block_db_path](~/global/bluestore.md#SP_bluestore_block_db_path), [bluestore_block_db_size](~/global/bluestore.md#SP_bluestore_block_db_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_db_path">bluestore_block_db_path</span> |  Path for db block device | Dev | Str |  |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_db_size">bluestore_block_db_size</span> |  Size of file to create for bluestore_block_db_path | Dev | Size | 0 |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_path">bluestore_block_path</span> |  Path to block device/file | Dev | Str |  |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_preallocate_file">bluestore_block_preallocate_file</span> |  Preallocate file created via bluestore_block*_create | Dev | Bool | False |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_size">bluestore_block_size</span> |  Size of file to create for backing bluestore | Dev | Size | 100_G |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_wal_create">bluestore_block_wal_create</span> |  Create bluestore_block_wal_path if it doesn't exist | Dev | Bool | False |  |  |  |  |  | [[bluestore_block_wal_path](~/global/bluestore.md#SP_bluestore_block_wal_path), [bluestore_block_wal_size](~/global/bluestore.md#SP_bluestore_block_wal_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_wal_path">bluestore_block_wal_path</span> |  Path to block device/file backing bluefs wal | Dev | Str |  |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_block_wal_size">bluestore_block_wal_size</span> |  Size of file to create for bluestore_block_wal_path | Dev | Size | 96_M |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_bluefs">bluestore_bluefs</span> |  Use BlueFS to back rocksdb | Dev | Bool | True |  |  |  |  |  |  | CREATE |  |  | BlueFS allows rocksdb to share the same physical device(s) as the rest of BlueStore.  It should be used in all cases unless testing/developing an alternative metadata database for BlueStore. |  |
| <span id="SP_bluestore_bluefs_alloc_failure_dump_interval">bluestore_bluefs_alloc_failure_dump_interval</span> |  How frequently (in seconds) to dump allocator onBlueFS space allocation failure | Advanced | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_bluefs_env_mirror">bluestore_bluefs_env_mirror</span> |  Mirror bluefs data to file system for testing/validation | Dev | Bool | False |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_bluefs_max_free">bluestore_bluefs_max_free</span> |  Maximum free space allocated to BlueFS | Advanced | Size | 10_G |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_cache_age_bin_interval">bluestore_cache_age_bin_interval</span> |  The duration (in seconds) represented by a single cache age bin. | Dev | Float | 1 |  |  |  |  |  | [[bluestore_cache_age_bins_kv](~/global/bluestore.md#SP_bluestore_cache_age_bins_kv), [bluestore_cache_age_bins_kv_onode](~/global/bluestore.md#SP_bluestore_cache_age_bins_kv_onode), [bluestore_cache_age_bins_meta](~/global/bluestore.md#SP_bluestore_cache_age_bins_meta), [bluestore_cache_age_bins_data](~/global/bluestore.md#SP_bluestore_cache_age_bins_data)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_age_bins_data">bluestore_cache_age_bins_data</span> |  A 10 element, space separated list of age bins for data cache | Dev | Str | 1 2 6 24 120 720 0 0 0 0 |  |  |  |  |  | [[bluestore_cache_age_bin_interval](~/global/bluestore.md#SP_bluestore_cache_age_bin_interval)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_age_bins_kv">bluestore_cache_age_bins_kv</span> |  A 10 element, space separated list of age bins for kv cache | Dev | Str | 1 2 6 24 120 720 0 0 0 0 |  |  |  |  |  | [[bluestore_cache_age_bin_interval](~/global/bluestore.md#SP_bluestore_cache_age_bin_interval)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_age_bins_kv_onode">bluestore_cache_age_bins_kv_onode</span> |  A 10 element, space separated list of age bins for kv onode cache | Dev | Str | 0 0 0 0 0 0 0 0 0 720 |  |  |  |  |  | [[bluestore_cache_age_bin_interval](~/global/bluestore.md#SP_bluestore_cache_age_bin_interval)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_age_bins_meta">bluestore_cache_age_bins_meta</span> |  A 10 element, space separated list of age bins for onode cache | Dev | Str | 1 2 6 24 120 720 0 0 0 0 |  |  |  |  |  | [[bluestore_cache_age_bin_interval](~/global/bluestore.md#SP_bluestore_cache_age_bin_interval)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_autotune">bluestore_cache_autotune</span> |  Automatically tune the ratio of caches while respecting min values. | Dev | Bool | True |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size), [bluestore_cache_meta_ratio](~/global/bluestore.md#SP_bluestore_cache_meta_ratio)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_autotune_interval">bluestore_cache_autotune_interval</span> |  The number of seconds to wait between rebalances when cache autotune is enabled. | Dev | Float | 5 |  |  |  |  |  | [[bluestore_cache_autotune](~/global/bluestore.md#SP_bluestore_cache_autotune)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_kv_onode_ratio">bluestore_cache_kv_onode_ratio</span> |  Ratio of bluestore cache to devote to kv onode column family (rocksdb) | Dev | Float | 0.04 |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_kv_ratio">bluestore_cache_kv_ratio</span> |  Ratio of bluestore cache to devote to key/value database (RocksDB) | Dev | Float | 0.45 |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_meta_ratio">bluestore_cache_meta_ratio</span> |  Ratio of bluestore cache to devote to metadata | Dev | Float | 0.45 |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_size">bluestore_cache_size</span> |  Cache size (in bytes) for BlueStore | Dev | Size | 0 |  |  |  |  |  |  |  |  |  | This includes data and metadata cached by BlueStore as well as memory devoted to rocksdb's cache(s). |  |
| <span id="SP_bluestore_cache_size_hdd">bluestore_cache_size_hdd</span> |  Default bluestore_cache_size for rotational media | Dev | Size | 1_G |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_size_ssd">bluestore_cache_size_ssd</span> |  Default bluestore_cache_size for non-rotational (solid state) media | Dev | Size | 3_G |  |  |  |  |  | [[bluestore_cache_size](~/global/bluestore.md#SP_bluestore_cache_size)] |  |  |  |  |  |
| <span id="SP_bluestore_cache_trim_interval">bluestore_cache_trim_interval</span> |  How frequently we trim the bluestore cache | Advanced | Float | 0.05 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_cache_trim_max_skip_pinned">bluestore_cache_trim_max_skip_pinned</span> |  Max pinned cache entries we consider before giving up | Dev | Uint | 1000 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_cache_type">bluestore_cache_type</span> |  Cache replacement algorithm | Dev | Str | 2q |  |  |  | ["2q", "lru"] |  |  |  |  |  |  |  |
| <span id="SP_bluestore_cleaner_sleep_interval">bluestore_cleaner_sleep_interval</span> |  How long cleaner should sleep before re-checking utilization | Advanced | Float | 5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_clone_cow">bluestore_clone_cow</span> |  Use copy-on-write when cloning objects (versus reading and rewriting them at clone time) | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_compression_algorithm">bluestore_compression_algorithm</span> |  Default compression algorithm to use when writing object data | Advanced | Str | snappy |  |  |  | ["", "snappy", "zlib", "zstd", "lz4"] |  |  | RUNTIME |  |  | This controls the default compressor to use (if any) if the per-pool property is not set.  Note that zstd is *not* recommended for bluestore due to high CPU overhead when compressing small amounts of data. |  |
| <span id="SP_bluestore_compression_max_blob_size">bluestore_compression_max_blob_size</span> |  Maximum chunk size to apply compression to when non-random access is expected for an object. | Advanced | Size | 0 |  |  |  |  |  |  | RUNTIME |  |  | Chunks larger than this are broken into smaller chunks before being compressed |  |
| <span id="SP_bluestore_compression_max_blob_size_hdd">bluestore_compression_max_blob_size_hdd</span> |  Default value of bluestore_compression_max_blob_size for rotational media | Advanced | Size | 64_K |  |  |  |  |  | [[bluestore_compression_max_blob_size](~/global/bluestore.md#SP_bluestore_compression_max_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_compression_max_blob_size_ssd">bluestore_compression_max_blob_size_ssd</span> |  Default value of bluestore_compression_max_blob_size for non-rotational (solid state) media | Advanced | Size | 64_K |  |  |  |  |  | [[bluestore_compression_max_blob_size](~/global/bluestore.md#SP_bluestore_compression_max_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_compression_min_blob_size">bluestore_compression_min_blob_size</span> |  Maximum chunk size to apply compression to when random access is expected for an object. | Advanced | Size | 0 |  |  |  |  |  |  | RUNTIME |  |  | Chunks larger than this are broken into smaller chunks before being compressed |  |
| <span id="SP_bluestore_compression_min_blob_size_hdd">bluestore_compression_min_blob_size_hdd</span> |  Default value of bluestore_compression_min_blob_size for rotational media | Advanced | Size | 8_K |  |  |  |  |  | [[bluestore_compression_min_blob_size](~/global/bluestore.md#SP_bluestore_compression_min_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_compression_min_blob_size_ssd">bluestore_compression_min_blob_size_ssd</span> |  Default value of bluestore_compression_min_blob_size for non-rotational (solid state) media | Advanced | Size | 64_K |  |  |  |  |  | [[bluestore_compression_min_blob_size](~/global/bluestore.md#SP_bluestore_compression_min_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_compression_mode">bluestore_compression_mode</span> |  Default policy for using compression when pool does not specify | Advanced | Str | none |  |  |  | ["none", "passive", "aggressive", "force"] |  |  | RUNTIME |  |  | 'none' means never use compression.  'passive' means use compression when clients hint that data is compressible.  'aggressive' means use compression unless clients hint that data is not compressible.  This option is used when the per-pool property for the compression mode is not present. |  |
| <span id="SP_bluestore_compression_required_ratio">bluestore_compression_required_ratio</span> |  Compression ratio required to store compressed data | Advanced | Float | 0.875 |  |  |  |  |  |  | RUNTIME |  |  | If we compress data and get less than this we discard the result and store the original uncompressed data. |  |
| <span id="SP_bluestore_csum_type">bluestore_csum_type</span> |  Default checksum algorithm to use | Advanced | Str | crc32c |  |  |  | ["none", "crc32c", "crc32c_16", "crc32c_8", "xxhash32", "xxhash64"] |  |  | RUNTIME |  |  | crc32c, xxhash32, and xxhash64 are available.  The _16 and _8 variants use only a subset of the bits for more compact (but less reliable) checksumming. |  |
| <span id="SP_bluestore_debug_enforce_settings">bluestore_debug_enforce_settings</span> |  Enforces specific hw profile settings | Dev | Str | default |  |  |  | ["default", "hdd", "ssd"] |  |  |  |  |  | 'hdd' enforces settings intended for BlueStore above a rotational drive. 'ssd' enforces settings intended for BlueStore above a solid drive. 'default' - using settings for the actual hardware. |  |
| <span id="SP_bluestore_debug_freelist">bluestore_debug_freelist</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_fsck_abort">bluestore_debug_fsck_abort</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_inject_bug21040">bluestore_debug_inject_bug21040</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_inject_csum_err_probability">bluestore_debug_inject_csum_err_probability</span> |  inject crc verification errors into bluestore device reads | Dev | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_inject_read_err">bluestore_debug_inject_read_err</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_legacy_omap">bluestore_debug_legacy_omap</span> |  Allows mkfs to create OSD in legacy OMAP naming mode (neither per-pool nor per-pg). This is intended primarily for developers' purposes. The resulting OSD might/would be transformed to the currrently default 'per-pg' format when BlueStore's quick-fix or repair are applied. | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_no_reuse_blocks">bluestore_debug_no_reuse_blocks</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_omit_block_device_write">bluestore_debug_omit_block_device_write</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_omit_kv_commit">bluestore_debug_omit_kv_commit</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_permit_any_bdev_label">bluestore_debug_permit_any_bdev_label</span> |   | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_prefill">bluestore_debug_prefill</span> |  simulate fragmentation | Dev | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_prefragment_max">bluestore_debug_prefragment_max</span> |   | Dev | Size | 1_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_random_read_err">bluestore_debug_random_read_err</span> |   | Dev | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_randomize_serial_transaction">bluestore_debug_randomize_serial_transaction</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_small_allocations">bluestore_debug_small_allocations</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_debug_too_many_blobs_threshold">bluestore_debug_too_many_blobs_threshold</span> |   | Dev | Int | 24576 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_default_buffered_read">bluestore_default_buffered_read</span> |  Cache read results by default (unless hinted NOCACHE or WONTNEED) | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_default_buffered_write">bluestore_default_buffered_write</span> |  Cache writes by default (unless hinted NOCACHE or WONTNEED) | Advanced | Bool | False |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_deferred_batch_ops">bluestore_deferred_batch_ops</span> |  Max number of deferred writes before we flush the deferred write queue | Advanced | Uint | 0 |  | 0 | 65535 |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_deferred_batch_ops_hdd">bluestore_deferred_batch_ops_hdd</span> |  Default bluestore_deferred_batch_ops for rotational media | Advanced | Uint | 64 |  | 0 | 65535 |  |  | [[bluestore_deferred_batch_ops](~/global/bluestore.md#SP_bluestore_deferred_batch_ops)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_deferred_batch_ops_ssd">bluestore_deferred_batch_ops_ssd</span> |  Default bluestore_deferred_batch_ops for non-rotational (solid state) media | Advanced | Uint | 16 |  | 0 | 65535 |  |  | [[bluestore_deferred_batch_ops](~/global/bluestore.md#SP_bluestore_deferred_batch_ops)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_extent_map_inline_shard_prealloc_size">bluestore_extent_map_inline_shard_prealloc_size</span> |  Preallocated buffer for inline shards | Dev | Size | 256 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_extent_map_shard_max_size">bluestore_extent_map_shard_max_size</span> |  Max size (bytes) for a single extent map shard before splitting | Dev | Size | 1200 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_extent_map_shard_min_size">bluestore_extent_map_shard_min_size</span> |  Min size (bytes) for a single extent map shard before merging | Dev | Size | 150 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_extent_map_shard_target_size">bluestore_extent_map_shard_target_size</span> |  Target size (bytes) for a single extent map shard | Dev | Size | 500 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_extent_map_shard_target_size_slop">bluestore_extent_map_shard_target_size_slop</span> |  Ratio above/below target for a shard when trying to align to an existing extent or blob boundary | Dev | Float | 0.2 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fail_eio">bluestore_fail_eio</span> |  fail/crash on EIO | Dev | Bool | False |  |  |  |  |  |  | RUNTIME |  |  | whether bluestore osd fails on eio |  |
| <span id="SP_bluestore_freelist_blocks_per_key">bluestore_freelist_blocks_per_key</span> |  Block (and bits) per database key | Dev | Size | 128 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_error_on_no_per_pg_omap">bluestore_fsck_error_on_no_per_pg_omap</span> |  Make fsck error (instead of warn) when objects without per-pg omap are found | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_error_on_no_per_pool_omap">bluestore_fsck_error_on_no_per_pool_omap</span> |  Make fsck error (instead of warn) when objects without per-pool omap are found | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_error_on_no_per_pool_stats">bluestore_fsck_error_on_no_per_pool_stats</span> |  Make fsck error (instead of warn) when bluestore lacks per-pool stats, e.g., after an upgrade | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_mkfs">bluestore_fsck_on_mkfs</span> |  Run fsck after mkfs | Dev | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_mkfs_deep">bluestore_fsck_on_mkfs_deep</span> |  Run deep fsck after mkfs | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_mount">bluestore_fsck_on_mount</span> |  Run fsck at mount | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_mount_deep">bluestore_fsck_on_mount_deep</span> |  Run deep fsck at mount when bluestore_fsck_on_mount is set to true | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_umount">bluestore_fsck_on_umount</span> |  Run fsck at umount | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_on_umount_deep">bluestore_fsck_on_umount_deep</span> |  Run deep fsck at umount when bluestore_fsck_on_umount is set to true | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_quick_fix_on_mount">bluestore_fsck_quick_fix_on_mount</span> |  Do quick-fix for the store at mount | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_quick_fix_threads">bluestore_fsck_quick_fix_threads</span> |  Number of additional threads to perform quick-fix (shallow fsck) command | Advanced | Int | 2 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_fsck_read_bytes_cap">bluestore_fsck_read_bytes_cap</span> |  Maximum bytes read at once by deep fsck | Advanced | Size | 64_M |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_fsck_shared_blob_tracker_size">bluestore_fsck_shared_blob_tracker_size</span> |  Size(a fraction of osd_memory_target, defaults to 128MB) of a hash table to track shared blobs ref counts. Higher the size, more precise is the tracker -> less overhead during the repair. | Dev | Float | 0.03125 |  |  |  |  |  | [[osd_memory_target](~/global/osd.md#SP_osd_memory_target)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_gc_enable_blob_threshold">bluestore_gc_enable_blob_threshold</span> |   | Dev | Int | 0 |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_gc_enable_total_threshold">bluestore_gc_enable_total_threshold</span> |   | Dev | Int | 0 |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_hybrid_alloc_mem_cap">bluestore_hybrid_alloc_mem_cap</span> |  Maximum RAM hybrid allocator should use before enabling bitmap supplement | Dev | Uint | 64_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_ignore_data_csum">bluestore_ignore_data_csum</span> |  Ignore checksum errors on read and do not generate an EIO error | Dev | Bool | False |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_kv_sync_util_logging_s">bluestore_kv_sync_util_logging_s</span> |  KV sync thread utilization logging period | Advanced | Float | 10 |  |  |  |  |  |  | RUNTIME |  |  | How often (in seconds) to print KV sync thread utilization, not logged when set to 0 or when utilization is 0% |  |
| <span id="SP_bluestore_kvbackend">bluestore_kvbackend</span> |  Key value database to use for bluestore | Dev | Str | rocksdb |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_log_collection_list_age">bluestore_log_collection_list_age</span> |  log collection list operation if it's slower than this age (seconds) | Advanced | Float | 1_min |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_log_omap_iterator_age">bluestore_log_omap_iterator_age</span> |  log omap iteration operation if it's slower than this age (seconds) | Advanced | Float | 5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_log_op_age">bluestore_log_op_age</span> |  log operation if it's slower than this age (seconds) | Advanced | Float | 5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_max_alloc_size">bluestore_max_alloc_size</span> |  Maximum size of a single allocation (0 for no max) | Advanced | Size | 0 |  |  |  |  |  |  | CREATE |  |  |  |  |
| <span id="SP_bluestore_max_blob_size">bluestore_max_blob_size</span> |   | Dev | Size | 0 |  |  |  |  |  |  | RUNTIME |  |  | Bluestore blobs are collections of extents (ie on-disk data) originating from one or more objects.  Blobs can be compressed, typically have checksum data, may be overwritten, may be shared (with an extent ref map), or split.  This setting controls the maximum size a blob is allowed to be. |  |
| <span id="SP_bluestore_max_blob_size_hdd">bluestore_max_blob_size_hdd</span> |   | Dev | Size | 64_K |  |  |  |  |  | [[bluestore_max_blob_size](~/global/bluestore.md#SP_bluestore_max_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_max_blob_size_ssd">bluestore_max_blob_size_ssd</span> |   | Dev | Size | 64_K |  |  |  |  |  | [[bluestore_max_blob_size](~/global/bluestore.md#SP_bluestore_max_blob_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_max_defer_interval">bluestore_max_defer_interval</span> |  max duration to force deferred submit | Advanced | Float | 3 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_max_deferred_txc">bluestore_max_deferred_txc</span> |  Max transactions with deferred writes that can accumulate before we force flush deferred writes | Advanced | Uint | 32 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_min_alloc_size">bluestore_min_alloc_size</span> |  Minimum allocation size to allocate for an object | Advanced | Uint | 0 |  |  |  |  |  |  | CREATE |  |  | A smaller allocation size generally means less data is read and then rewritten when a copy-on-write operation is triggered (e.g., when writing to something that was recently snapshotted).  Similarly, less data is journaled before performing an overwrite (writes smaller than min_alloc_size must first pass through the BlueStore journal).  Larger values of min_alloc_size reduce the amount of metadata required to describe the on-disk layout and reduce overall fragmentation. |  |
| <span id="SP_bluestore_min_alloc_size_hdd">bluestore_min_alloc_size_hdd</span> |  Default min_alloc_size value for rotational media | Advanced | Size | 4_K |  |  |  |  |  | [[bluestore_min_alloc_size](~/global/bluestore.md#SP_bluestore_min_alloc_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_min_alloc_size_ssd">bluestore_min_alloc_size_ssd</span> |  Default min_alloc_size value for non-rotational (solid state)  media | Advanced | Size | 4_K |  |  |  |  |  | [[bluestore_min_alloc_size](~/global/bluestore.md#SP_bluestore_min_alloc_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_nid_prealloc">bluestore_nid_prealloc</span> |  Number of unique object ids to preallocate at a time | Dev | Int | 1024 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_prefer_deferred_size">bluestore_prefer_deferred_size</span> |  Writes smaller than this size will be written to the journal and then asynchronously written to the device.  This can be beneficial when using rotational media where seeks are expensive, and is helpful both with and without solid state journal/wal devices. | Advanced | Size | 0 |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_prefer_deferred_size_hdd">bluestore_prefer_deferred_size_hdd</span> |  Default bluestore_prefer_deferred_size for rotational media | Advanced | Size | 64_K |  |  |  |  |  | [[bluestore_prefer_deferred_size](~/global/bluestore.md#SP_bluestore_prefer_deferred_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_prefer_deferred_size_ssd">bluestore_prefer_deferred_size_ssd</span> |  Default bluestore_prefer_deferred_size for non-rotational (solid state) media | Advanced | Size | 0 |  |  |  |  |  | [[bluestore_prefer_deferred_size](~/global/bluestore.md#SP_bluestore_prefer_deferred_size)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_qfsck_on_mount">bluestore_qfsck_on_mount</span> |  Run quick-fsck at mount comparing allocation-file to RocksDB allocation state | Dev | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_retry_disk_reads">bluestore_retry_disk_reads</span> |  Number of read retries on checksum validation error | Advanced | Uint | 3 |  | 0 | 255 |  |  |  | RUNTIME |  |  | Retries to read data from the disk this many times when checksum validation fails to handle spurious read errors gracefully. |  |
| <span id="SP_bluestore_rocksdb_cf">bluestore_rocksdb_cf</span> |  Enable use of rocksdb column families for bluestore metadata | Advanced | Bool | True |  |  |  |  | #ifdef WITH_SEASTAR
// This is necessary as the Seastar's allocator imposes restrictions
// on the number of threads that entered malloc/free/*. Unfortunately,
// RocksDB sharding in BlueStore dramatically lifted the number of
// threads spawn during RocksDB's init.
.set_validator([](std::string *value, std::string *error_message) {
  if (const bool parsed_value = strict_strtob(value->c_str(), error_message);
    error_message->empty() && parsed_value) {
    *error_message = "invalid BlueStore sharding configuration."
                     " Be aware any change takes effect only on mkfs!";
    return -EINVAL;
  } else {
    return 0;
  }
})
#endif

 |  |  |  |  |  |  |
| <span id="SP_bluestore_rocksdb_cfs">bluestore_rocksdb_cfs</span> |  Definition of column families and their sharding | Dev | Str | m(3) p(3,0-12) O(3,0-13)=block_cache={type=binned_lru} L P |  |  |  |  |  |  |  |  |  | Space separated list of elements: column_def [ '=' rocksdb_options ]. column_def := column_name [ '(' shard_count [ ',' hash_begin '-' [ hash_end ] ] ')' ]. Example: 'I=write_buffer_size=1048576 O(6) m(7,10-)'. Interval [hash_begin..hash_end) defines characters to use for hash calculation. Recommended hash ranges: O(0-13) P(0-8) m(0-16). Sharding of S,T,C,M,B prefixes is inadvised |  |
| <span id="SP_bluestore_rocksdb_options">bluestore_rocksdb_options</span> |  Full set of rocksdb settings to override | Advanced | Str | compression=kNoCompression,max_write_buffer_number=4,min_write_buffer_number_to_merge=1,recycle_log_file_num=4,write_buffer_size=268435456,writable_file_max_buffer_size=0,compaction_readahead_size=2097152,max_background_compactions=2,max_total_wal_size=1073741824 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_rocksdb_options_annex">bluestore_rocksdb_options_annex</span> |  An addition to bluestore_rocksdb_options. Allows setting rocksdb options without repeating the existing defaults. | Advanced | Str |  |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_spdk_coremask">bluestore_spdk_coremask</span> |  A hexadecimal bit mask of the cores to run on. Note the core numbering can change between platforms and should be determined beforehand | Dev | Str | 0x1 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_spdk_io_sleep">bluestore_spdk_io_sleep</span> |  Time period to wait if there is no completed I/O from polling | Dev | Uint | 5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_spdk_max_io_completion">bluestore_spdk_max_io_completion</span> |  Maximal I/Os to be batched completed while checking queue pair completions, 0 means let spdk library determine it | Dev | Uint | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_spdk_mem">bluestore_spdk_mem</span> |  Amount of dpdk memory size in MB | Dev | Size | 512 |  |  |  |  |  |  |  |  |  | If running multiple SPDK instances per node, you must specify the amount of dpdk memory size in MB each instance will use, to make sure each instance uses its own dpdk memory |  |
| <span id="SP_bluestore_sync_submit_transaction">bluestore_sync_submit_transaction</span> |  Try to submit metadata transaction to rocksdb in queuing thread context | Dev | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_throttle_bytes">bluestore_throttle_bytes</span> |  Maximum bytes in flight before we throttle IO submission | Advanced | Size | 64_M |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_throttle_cost_per_io">bluestore_throttle_cost_per_io</span> |  Overhead added to transaction cost (in bytes) for each IO | Advanced | Size | 0 |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_throttle_cost_per_io_hdd">bluestore_throttle_cost_per_io_hdd</span> |  Default bluestore_throttle_cost_per_io for rotational media | Advanced | Uint | 670000 |  |  |  |  |  | [[bluestore_throttle_cost_per_io](~/global/bluestore.md#SP_bluestore_throttle_cost_per_io)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_throttle_cost_per_io_ssd">bluestore_throttle_cost_per_io_ssd</span> |  Default bluestore_throttle_cost_per_io for non-rotation (solid state) media | Advanced | Uint | 4000 |  |  |  |  |  | [[bluestore_throttle_cost_per_io](~/global/bluestore.md#SP_bluestore_throttle_cost_per_io)] | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_throttle_deferred_bytes">bluestore_throttle_deferred_bytes</span> |  Maximum bytes for deferred writes before we throttle IO submission | Advanced | Size | 128_M |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_bluestore_throttle_trace_rate">bluestore_throttle_trace_rate</span> |  Rate at which to sample bluestore transactions (per second) | Advanced | Float | 0 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_tracing">bluestore_tracing</span> |  Enable bluestore event tracing. | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_use_optimal_io_size_for_min_alloc_size">bluestore_use_optimal_io_size_for_min_alloc_size</span> |  Discover media optimal IO Size and use for min_alloc_size | Advanced | Bool | False |  |  |  |  |  | [[bluestore_min_alloc_size](~/global/bluestore.md#SP_bluestore_min_alloc_size)] | CREATE |  |  |  |  |
| <span id="SP_bluestore_volume_selection_policy">bluestore_volume_selection_policy</span> |  Determines bluefs volume selection policy | Dev | Str | use_some_extra |  |  |  | ["rocksdb_original", "use_some_extra", "fit_to_fast"] |  |  |  |  |  | Determines bluefs volume selection policy. 'use_some_extra' policy allows to override RocksDB level granularity and put high level's data to faster device even when the level doesn't completely fit there. 'fit_to_fast' policy enables using 100% of faster disk capacity and allows the user to turn on 'level_compaction_dynamic_level_bytes' option in RocksDB options. |  |
| <span id="SP_bluestore_volume_selection_reserved">bluestore_volume_selection_reserved</span> |  Space reserved at DB device and not allowed for 'use some extra' policy usage. Overrides 'bluestore_volume_selection_reserved_factor' setting and introduces straightforward limit. | Advanced | Int | 0 |  |  |  |  |  |  | STARTUP |  |  |  |  |
| <span id="SP_bluestore_volume_selection_reserved_factor">bluestore_volume_selection_reserved_factor</span> |  DB level size multiplier. Determines amount of space at DB device to bar from the usage when 'use some extra' policy is in action. Reserved size is determined as sum(L_max_size[0], L_max_size[L-1]) + L_max_size[L] * this_factor | Advanced | Float | 2 |  |  |  |  |  |  | STARTUP |  |  |  |  |
| <span id="SP_bluestore_warn_on_bluefs_spillover">bluestore_warn_on_bluefs_spillover</span> |  Enable health indication on bluefs slow device usage | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_warn_on_legacy_statfs">bluestore_warn_on_legacy_statfs</span> |  Enable health indication on lack of per-pool statfs reporting from bluestore | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_warn_on_no_per_pg_omap">bluestore_warn_on_no_per_pg_omap</span> |  Enable health indication on lack of per-pg omap | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_warn_on_no_per_pool_omap">bluestore_warn_on_no_per_pool_omap</span> |  Enable health indication on lack of per-pool omap | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluestore_warn_on_spurious_read_errors">bluestore_warn_on_spurious_read_errors</span> |  Enable health indication when spurious read errors are observed by OSD | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
