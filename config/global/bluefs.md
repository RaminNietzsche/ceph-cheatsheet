| Name | Desc | Level | Type | non-Daemon Default | Daemon Default | Min | Max | Valid Values | verbatim | See also | Flags | Services | Validator | Long Desc | Tags |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span id="SP_bluefs_alloc_size">bluefs_alloc_size</span> |  Allocation unit size for DB and WAL devices | Advanced | Size | 1_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_allocator">bluefs_allocator</span> |   | Dev | Str | hybrid |  |  |  | ["bitmap", "stupid", "avl", "hybrid"] |  |  |  |  |  |  |  |
| <span id="SP_bluefs_buffered_io">bluefs_buffered_io</span> |  Enabled buffered IO for bluefs reads. | Advanced | Bool | True |  |  |  |  |  |  |  |  |  | When this option is enabled, bluefs will in some cases perform buffered reads.  This allows the kernel page cache to act as a secondary cache for things like RocksDB block reads.  For example, if the rocksdb block cache isn't large enough to hold all blocks during OMAP iteration, it may be possible to read them from page cache instead of from the disk.  This can dramatically improve performance when the osd_memory_target is too small to hold all entries in block cache but it does come with downsides.  It has been reported to occasionally cause excessive kernel swapping (and associated stalls) under certain workloads. Currently the best and most consistent performing combination appears to be enabling bluefs_buffered_io and disabling system level swap.  It is possible that this recommendation may change in the future however. |  |
| <span id="SP_bluefs_check_for_zeros">bluefs_check_for_zeros</span> |  Check data read for suspicious pages | Dev | Bool | False |  |  |  |  |  | [[bluestore_retry_disk_reads](~/config/global/bluestore#SP_bluestore_retry_disk_reads)] | RUNTIME |  |  | Looks into data read to check if there is a 4K block entirely filled with zeros. If this happens, we re-read data. If there is difference, we print error to log. |  |
| <span id="SP_bluefs_check_volume_selector_often">bluefs_check_volume_selector_often</span> |  Periodically check validity of volume selector | Dev | Bool | False |  |  |  |  |  | [[bluefs_check_volume_selector_on_umount](~/config/global/bluefs#SP_bluefs_check_volume_selector_on_umount)] | STARTUP |  |  | Periodically checks if current volume selector does not diverge from the valid state. Reference is constructed from bluefs inode table. Asserts on inconsistency. This is debug feature. |  |
| <span id="SP_bluefs_check_volume_selector_on_umount">bluefs_check_volume_selector_on_umount</span> |  Check validity of volume selector on umount | Dev | Bool | False |  |  |  |  |  |  | RUNTIME |  |  | Checks if volume selector did not diverge from the state it should be in. Reference is constructed from bluefs inode table. Asserts on inconsistency. |  |
| <span id="SP_bluefs_compact_log_sync">bluefs_compact_log_sync</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_log_compact_min_ratio">bluefs_log_compact_min_ratio</span> |   | Advanced | Float | 5 |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_log_compact_min_size">bluefs_log_compact_min_size</span> |   | Advanced | Size | 16_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_log_replay_check_allocations">bluefs_log_replay_check_allocations</span> |  Enables checks for allocations consistency during log replay | Advanced | Bool | True |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_max_log_runway">bluefs_max_log_runway</span> |   | Advanced | Size | 4_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_max_prefetch">bluefs_max_prefetch</span> |   | Advanced | Size | 1_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_min_flush_size">bluefs_min_flush_size</span> |   | Advanced | Size | 512_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_min_log_runway">bluefs_min_log_runway</span> |   | Advanced | Size | 1_M |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_replay_recovery">bluefs_replay_recovery</span> |  Attempt to read bluefs log so large that it became unreadable. | Dev | Bool | False |  |  |  |  |  |  |  |  |  | If BlueFS log grows to extreme sizes (200GB+) it is likely that it becames unreadable. This options enables heuristics that scans devices for missing data. DO NOT ENABLE BY DEFAULT |  |
| <span id="SP_bluefs_replay_recovery_disable_compact">bluefs_replay_recovery_disable_compact</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_shared_alloc_size">bluefs_shared_alloc_size</span> |  Allocation unit size for primary/shared device | Advanced | Size | 64_K |  |  |  |  |  |  |  |  |  |  |  |
| <span id="SP_bluefs_sync_write">bluefs_sync_write</span> |   | Advanced | Bool | False |  |  |  |  |  |  |  |  |  |  |  |
