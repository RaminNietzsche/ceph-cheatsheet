| Name | Desc | Level | Type | non-Daemon Default | Daemon Default | Min | Max | Valid Values | verbatim | See also | Flags | Services | Validator | Long Desc | Tags |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span id="SP_mds_action_on_write_error">mds_action_on_write_error</span> |  action to take when MDS cannot write to RADOS (0:ignore, 1:read-only, 2:suicide) | Advanced | Uint | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_alternate_name_max">mds_alternate_name_max</span> |  set the maximum length of alternate names for dentries | Advanced | Size | 8_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_asio_thread_count">mds_asio_thread_count</span> |  Size of thread pool for ASIO completions | Advanced | Uint | 2 |  | 1 |  |  |  |  |  | mds |  |  | mds |
| <span id="SP_mds_bal_export_pin">mds_bal_export_pin</span> |  allow setting directory export pins to particular ranks | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_fragment_dirs">mds_bal_fragment_dirs</span> |  enable directory fragmentation | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  | Directory fragmentation is a standard feature of CephFS that allows sharding directories across multiple objects for performance and stability. Additionally, this allows fragments to be distributed across multiple active MDSs to increase throughput. Disabling (new) fragmentation should only be done in exceptional circumstances and may lead to performance issues. |  |
| <span id="SP_mds_bal_fragment_fast_factor">mds_bal_fragment_fast_factor</span> |  ratio of mds_bal_split_size at which fast fragment splitting occurs | Advanced | Float | 1.5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_fragment_interval">mds_bal_fragment_interval</span> |  delay in seconds before interrupting client IO to perform splits | Advanced | Int | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_fragment_size_max">mds_bal_fragment_size_max</span> |  maximum size of a directory fragment before new creat/links fail | Advanced | Int | 100000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_idle_threshold">mds_bal_idle_threshold</span> |  idle metadata popularity threshold before rebalancing | Advanced | Float | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_interval">mds_bal_interval</span> |  interval between MDS balancer cycles | Advanced | Int | 10 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_max">mds_bal_max</span> |   | Dev | Int | -1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_max_until">mds_bal_max_until</span> |   | Dev | Int | -1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_merge_size">mds_bal_merge_size</span> |  size of fragments where merging should occur | Advanced | Int | 50 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_midchunk">mds_bal_midchunk</span> |   | Dev | Float | 0.3 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_min_rebalance">mds_bal_min_rebalance</span> |  amount overloaded over internal target before balancer begins offloading | Dev | Float | 0.1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_min_start">mds_bal_min_start</span> |   | Dev | Float | 0.2 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_minchunk">mds_bal_minchunk</span> |   | Dev | Float | 0.001 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_mode">mds_bal_mode</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_need_max">mds_bal_need_max</span> |   | Dev | Float | 1.2 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_need_min">mds_bal_need_min</span> |   | Dev | Float | 0.8 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_replicate_threshold">mds_bal_replicate_threshold</span> |  hot popularity threshold to replicate a subtree | Advanced | Float | 8000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_sample_interval">mds_bal_sample_interval</span> |  interval in seconds between balancer ticks | Advanced | Float | 3 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_split_bits">mds_bal_split_bits</span> |  power of two child fragments for a fragment on split | Advanced | Int | 3 |  | 1 | 24 |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_split_rd">mds_bal_split_rd</span> |  hot read popularity threshold for splitting a directory fragment | Advanced | Float | 25000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_split_size">mds_bal_split_size</span> |  minimum size of directory fragment before splitting | Advanced | Int | 10000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_split_wr">mds_bal_split_wr</span> |  hot write popularity threshold for splitting a directory fragment | Advanced | Float | 10000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_target_decay">mds_bal_target_decay</span> |  rate of decay for export targets communicated to clients | Advanced | Float | 10 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_bal_unreplicate_threshold">mds_bal_unreplicate_threshold</span> |  cold popularity threshold to merge subtrees | Advanced | Float | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_beacon_grace">mds_beacon_grace</span> |  tolerance in seconds for missed MDS beacons to monitors | Advanced | Float | 15 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_beacon_interval">mds_beacon_interval</span> |  interval in seconds between MDS beacon messages sent to monitors | Advanced | Float | 4 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_cache_memory_limit">mds_cache_memory_limit</span> |  target maximum memory usage of MDS cache | Basic | Size | 4_G |  |  |  |  |  |  | RUNTIME | mds |  | This sets a target maximum memory usage of the MDS cache and is the primary tunable to limit the MDS memory usage. The MDS will try to stay under a reservation of this limit (by default 95%; 1 - mds_cache_reservation) by trimming unused metadata in its cache and recalling cached items in the client caches. It is possible for the MDS to exceed this limit due to slow recall from clients. The mds_health_cache_threshold (150%) sets a cache full threshold for when the MDS signals a cluster health warning. |  |
| <span id="SP_mds_cache_mid">mds_cache_mid</span> |  midpoint for MDS cache LRU | Advanced | Float | 0.7 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_cache_release_free_interval">mds_cache_release_free_interval</span> |  interval in seconds between heap releases | Dev | Secs | 10 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_cache_reservation">mds_cache_reservation</span> |  amount of memory to reserve for future cached objects | Advanced | Float | 0.05 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_cache_trim_decay_rate">mds_cache_trim_decay_rate</span> |  decay rate for trimming MDS cache throttle | Advanced | Float | 1 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_cache_trim_interval">mds_cache_trim_interval</span> |  interval in seconds between cache trimming | Advanced | Secs | 1 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_cache_trim_threshold">mds_cache_trim_threshold</span> |  threshold for number of dentries that can be trimmed | Advanced | Size | 256_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_cap_acquisition_throttle_retry_request_timeout">mds_cap_acquisition_throttle_retry_request_timeout</span> |  timeout in seconds after which a client request is retried due to cap acquisition throttling | Advanced | Float | 0.5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_cap_revoke_eviction_timeout">mds_cap_revoke_eviction_timeout</span> |  number of seconds after which clients which have not responded to cap revoke messages by the MDS are evicted. | Advanced | Float | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_client_delegate_inos_pct">mds_client_delegate_inos_pct</span> |  percentage of preallocated inos to delegate to client | Advanced | Uint | 50 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_client_prealloc_inos">mds_client_prealloc_inos</span> |  number of unused inodes to pre-allocate to clients for file creation | Advanced | Int | 1000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_client_writeable_range_max_inc_objs">mds_client_writeable_range_max_inc_objs</span> |  maximum number of objects in writeable range of a file for a client | Advanced | Uint | 1_K |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_connect_bootstrapping">mds_connect_bootstrapping</span> |   | Dev | Bool | False |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_mds_damage_table_max_entries">mds_damage_table_max_entries</span> |  maximum number of damage table entries | Advanced | Int | 10000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_data">mds_data</span> |  path to MDS data and keyring | Advanced | Str | /var/lib/ceph/mds/$cluster-$id |  |  |  |  |  |  | NO_MON_UPDATE | mds |  |  |  |
| <span id="SP_mds_debug_auth_pins">mds_debug_auth_pins</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_debug_frag">mds_debug_frag</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_debug_scatterstat">mds_debug_scatterstat</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_debug_subtrees">mds_debug_subtrees</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_decay_halflife">mds_decay_halflife</span> |  rate of decay for temperature counters on each directory for balancing | Advanced | Float | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_default_dir_hash">mds_default_dir_hash</span> |  hash function to select directory fragment for dentry name | Advanced | Int | 2 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_defer_session_stale">mds_defer_session_stale</span> |   | Dev | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_deny_all_reconnect">mds_deny_all_reconnect</span> |  flag to deny all client reconnects during failover | Advanced | Bool | False |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_dir_keys_per_op">mds_dir_keys_per_op</span> |  number of directory entries to read in one RADOS operation | Advanced | Int | 16384 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_dir_max_commit_size">mds_dir_max_commit_size</span> |  maximum size in megabytes for a RADOS write to a directory | Advanced | Int | 10 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_dir_max_entries">mds_dir_max_entries</span> |  maximum number of entries per directory before new creat/links fail | Advanced | Uint | 0 |  |  |  |  |  |  | RUNTIME | mds |  | The maximum number of entries before any new entries are rejected with ENOSPC. |  |
| <span id="SP_mds_dir_prefetch">mds_dir_prefetch</span> |  flag to prefetch entire dir | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_dirstat_min_interval">mds_dirstat_min_interval</span> |   | Dev | Float | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_dump_cache_after_rejoin">mds_dump_cache_after_rejoin</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_dump_cache_on_map">mds_dump_cache_on_map</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_dump_cache_threshold_file">mds_dump_cache_threshold_file</span> |  threshold for cache usage to disallow \"dump cache\" operation to file | Dev | Size | 0 |  |  |  |  |  |  |  | mds |  | Disallow MDS from dumping caches to file via \"dump cache\" command if cache usage exceeds this threshold. |  |
| <span id="SP_mds_dump_cache_threshold_formatter">mds_dump_cache_threshold_formatter</span> |  threshold for cache usage to disallow \"dump cache\" operation to formatter | Dev | Size | 1_G |  |  |  |  |  |  |  | mds |  | Disallow MDS from dumping caches to formatter via \"dump cache\" command if cache usage exceeds this threshold. |  |
| <span id="SP_mds_early_reply">mds_early_reply</span> |  additional reply to clients that metadata requests are complete but not yet durable | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_enable_op_tracker">mds_enable_op_tracker</span> |  track remote operation progression and statistics | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_enforce_unique_name">mds_enforce_unique_name</span> |  require MDS name is unique in the cluster | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_export_ephemeral_distributed">mds_export_ephemeral_distributed</span> |  allow ephemeral distributed pinning of the loaded subtrees | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME | mds |  | pin the immediate child directories of the loaded directory inode based on the consistent hash of the child's inode number.  |  |
| <span id="SP_mds_export_ephemeral_distributed_factor">mds_export_ephemeral_distributed_factor</span> |  multiple of max_mds for splitting and distributing directory | Advanced | Float | 2 |  | 1 | 100 |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_export_ephemeral_random">mds_export_ephemeral_random</span> |  allow ephemeral random pinning of the loaded subtrees | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME | mds |  | probabilistically pin the loaded directory inode and the subtree beneath it to an MDS based on the consistent hash of the inode number. The higher this value the more likely the loaded subtrees get pinned |  |
| <span id="SP_mds_export_ephemeral_random_max">mds_export_ephemeral_random_max</span> |  the maximum percent permitted for random ephemeral pin policy | Advanced | Float | 0.01 |  | 0 | 1 |  |  | [[mds_export_ephemeral_random](~/mds/mds.md#SP_mds_export_ephemeral_random)] | RUNTIME | mds |  |  |  |
| <span id="SP_mds_forward_all_requests_to_auth">mds_forward_all_requests_to_auth</span> |  always process op on auth mds | Advanced | Bool | False |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_freeze_tree_timeout">mds_freeze_tree_timeout</span> |   | Dev | Float | 30 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_fscrypt_last_block_max_size">mds_fscrypt_last_block_max_size</span> |  maximum size of the last block without the header along with a truncate request when the fscrypt is enabled. | Advanced | Size | 4_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_hack_allow_loading_invalid_metadata">mds_hack_allow_loading_invalid_metadata</span> |  INTENTIONALLY CAUSE DATA LOSS by bypasing checks for invalid metadata on disk. Allows testing repair tools. | Advanced | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_health_cache_threshold">mds_health_cache_threshold</span> |  threshold for cache size to generate health warning | Advanced | Float | 1.5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_health_summarize_threshold">mds_health_summarize_threshold</span> |  threshold of number of clients to summarize late client recall | Advanced | Int | 10 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_heartbeat_grace">mds_heartbeat_grace</span> |  tolerance in seconds for MDS internal heartbeat | Advanced | Float | 15 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_inject_migrator_session_race">mds_inject_migrator_session_race</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_inject_traceless_reply_probability">mds_inject_traceless_reply_probability</span> |   | Dev | Float | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_join_fs">mds_join_fs</span> |  file system MDS prefers to join | Basic | Str |  |  |  |  |  |  |  | RUNTIME | mds |  | This setting indicates which file system name the MDS should prefer to join (affinity). The monitors will try to have the MDS cluster safely reach a state where all MDS have strong affinity, even via failovers to a standby. |  |
| <span id="SP_mds_journal_format">mds_journal_format</span> |   | Dev | Uint | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_create_at">mds_kill_create_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_export_at">mds_kill_export_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_import_at">mds_kill_import_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_journal_at">mds_kill_journal_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_journal_expire_at">mds_kill_journal_expire_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_journal_replay_at">mds_kill_journal_replay_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_link_at">mds_kill_link_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_mdstable_at">mds_kill_mdstable_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_openc_at">mds_kill_openc_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_kill_rename_at">mds_kill_rename_at</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_events_per_segment">mds_log_events_per_segment</span> |  maximum number of events in an MDS journal segment | Advanced | Int | 1024 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_max_events">mds_log_max_events</span> |  maximum number of events in the MDS journal (-1 is unlimited) | Advanced | Int | -1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_max_segments">mds_log_max_segments</span> |  maximum number of segments which may be untrimmed | Advanced | Uint | 128 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_pause">mds_log_pause</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_segment_size">mds_log_segment_size</span> |  size in bytes of each MDS log segment | Advanced | Size | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_skip_corrupt_events">mds_log_skip_corrupt_events</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_log_warn_factor">mds_log_warn_factor</span> |  trigger MDS_HEALTH_TRIM warning when the mds log is longer than mds_log_max_segments * mds_log_warn_factor | Advanced | Float | 2 |  | 1 |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_max_caps_per_client">mds_max_caps_per_client</span> |  maximum number of capabilities a client may hold | Advanced | Uint | 1_M |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_completed_flushes">mds_max_completed_flushes</span> |   | Dev | Uint | 100000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_completed_requests">mds_max_completed_requests</span> |   | Dev | Uint | 100000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_export_size">mds_max_export_size</span> |   | Dev | Size | 20_M |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_file_recover">mds_max_file_recover</span> |  maximum number of files to recover file sizes in parallel | Advanced | Uint | 32 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_purge_files">mds_max_purge_files</span> |  maximum number of deleted files to purge in parallel | Advanced | Uint | 64 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_purge_ops">mds_max_purge_ops</span> |  maximum number of purge operations performed in parallel | Advanced | Uint | 8_K |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_purge_ops_per_pg">mds_max_purge_ops_per_pg</span> |  number of parallel purge operations performed per PG | Advanced | Float | 0.5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_retries_on_remount_failure">mds_max_retries_on_remount_failure</span> |  number of consecutive failed remount attempts for invalidating kernel dcache after which client would abort. | Advanced | Uint | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_scrub_ops_in_progress">mds_max_scrub_ops_in_progress</span> |  maximum number of scrub operations performed in parallel | Advanced | Int | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_max_snaps_per_dir">mds_max_snaps_per_dir</span> |  max snapshots per directory | Advanced | Uint | 100 |  | 0 | 4_K |  |  |  | RUNTIME | mds |  | maximum number of snapshots that can be created per directory |  |
| <span id="SP_mds_max_xattr_pairs_size">mds_max_xattr_pairs_size</span> |  maximum aggregate size of extended attributes on a file | Advanced | Size | 64_K |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_metrics_update_interval">mds_metrics_update_interval</span> |  interval in seconds for metrics data update. | Advanced | Secs | 2 |  |  |  |  |  |  | RUNTIME | mds |  | interval in seconds after which active MDSs send client metrics data to rank 0. |  |
| <span id="SP_mds_min_caps_per_client">mds_min_caps_per_client</span> |  minimum number of capabilities a client may hold | Advanced | Uint | 100 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_min_caps_working_set">mds_min_caps_working_set</span> |  number of capabilities a client may hold without cache pressure warnings generated | Advanced | Uint | 10000 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_mon_shutdown_timeout">mds_mon_shutdown_timeout</span> |  time to wait for mon to receive damaged MDS rank notification | Advanced | Float | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_numa_node">mds_numa_node</span> |  set mds's cpu affinity to a numa node (-1 for none) | Advanced | Int | -1 |  |  |  |  |  |  | STARTUP | mds |  |  |  |
| <span id="SP_mds_oft_prefetch_dirfrags">mds_oft_prefetch_dirfrags</span> |  prefetch dirfrags recorded in open file table on startup | Advanced | Bool | False |  |  |  |  |  |  | STARTUP | mds |  |  |  |
| <span id="SP_mds_op_complaint_time">mds_op_complaint_time</span> |  time in seconds to consider an operation blocked after no updates | Advanced | Float | 30 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_op_history_duration">mds_op_history_duration</span> |  expiration time in seconds of historical operations | Advanced | Uint | 600 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_op_history_size">mds_op_history_size</span> |  maximum size for list of historical operations | Advanced | Uint | 20 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_op_log_threshold">mds_op_log_threshold</span> |   | Dev | Int | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_ping_grace">mds_ping_grace</span> |  timeout after which an MDS is considered laggy by rank 0 MDS. | Advanced | Secs | 15 |  |  |  |  |  |  | RUNTIME | mds |  | timeout for replying to a ping message sent by rank 0 after which an active MDS considered laggy (delayed metrics) by rank 0. |  |
| <span id="SP_mds_ping_interval">mds_ping_interval</span> |  interval in seconds for sending ping messages to active MDSs. | Advanced | Secs | 5 |  |  |  |  |  |  | RUNTIME | mds |  | interval in seconds for rank 0 to send ping messages to all active MDSs. |  |
| <span id="SP_mds_purge_queue_busy_flush_period">mds_purge_queue_busy_flush_period</span> |   | Dev | Float | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_recall_global_max_decay_threshold">mds_recall_global_max_decay_threshold</span> |  decay threshold for throttle on recalled caps globally | Advanced | Size | 128_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_recall_max_caps">mds_recall_max_caps</span> |  maximum number of caps to recall from client session in single recall | Advanced | Size | 30000 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_recall_max_decay_rate">mds_recall_max_decay_rate</span> |  decay rate for throttle on recalled caps on a session | Advanced | Float | 1.5 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_recall_max_decay_threshold">mds_recall_max_decay_threshold</span> |  decay threshold for throttle on recalled caps on a session | Advanced | Size | 128_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_recall_warning_decay_rate">mds_recall_warning_decay_rate</span> |  decay rate for warning on slow session cap recall | Advanced | Float | 60 |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_recall_warning_threshold">mds_recall_warning_threshold</span> |  decay threshold for warning on slow session cap recall | Advanced | Size | 256_K |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_reconnect_timeout">mds_reconnect_timeout</span> |  timeout in seconds to wait for clients to reconnect during MDS reconnect recovery state | Advanced | Float | 45 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_replay_interval">mds_replay_interval</span> |  time in seconds between replay of updates to journal by standby replay MDS | Advanced | Float | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_replay_unsafe_with_closed_session">mds_replay_unsafe_with_closed_session</span> |  complete all the replay request when mds is restarted, no matter the session is closed or not | Advanced | Bool | False |  |  |  |  |  |  | STARTUP | mds |  |  |  |
| <span id="SP_mds_request_load_average_decay_rate">mds_request_load_average_decay_rate</span> |  rate of decay in seconds for calculating request load average | Advanced | Float | 1_min |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_root_ino_gid">mds_root_ino_gid</span> |  default gid for new root directory | Advanced | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_root_ino_uid">mds_root_ino_uid</span> |  default uid for new root directory | Advanced | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_scatter_nudge_interval">mds_scatter_nudge_interval</span> |  minimum interval between scatter lock updates | Advanced | Float | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_session_blocklist_on_evict">mds_session_blocklist_on_evict</span> |  blocklist clients that have been evicted | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_session_blocklist_on_timeout">mds_session_blocklist_on_timeout</span> |  blocklist clients whose sessions have become stale | Advanced | Bool | True |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_session_cache_liveness_decay_rate">mds_session_cache_liveness_decay_rate</span> |  decay rate for session liveness leading to preemptive cap recall | Advanced | Float | 5_min |  |  |  |  |  | [[mds_session_cache_liveness_magnitude](~/mds/mds.md#SP_mds_session_cache_liveness_magnitude)] | RUNTIME | mds |  | This determines how long a session needs to be quiescent before the MDS begins preemptively recalling capabilities. The default of 5 minutes will cause 10 halvings of the decay counter after 1 hour, or 1/1024. The default magnitude of 10 (1^10 or 1024) is chosen so that the MDS considers a previously chatty session (approximately) to be quiescent after 1 hour. |  |
| <span id="SP_mds_session_cache_liveness_magnitude">mds_session_cache_liveness_magnitude</span> |  decay magnitude for preemptively recalling caps on quiet client | Advanced | Size | 10 |  |  |  |  |  | [[mds_session_cache_liveness_decay_rate](~/mds/mds.md#SP_mds_session_cache_liveness_decay_rate)] | RUNTIME | mds |  | This is the order of magnitude difference (in base 2) of the internal liveness decay counter and the number of capabilities the session holds. When this difference occurs, the MDS treats the session as quiescent and begins recalling capabilities. |  |
| <span id="SP_mds_session_cap_acquisition_decay_rate">mds_session_cap_acquisition_decay_rate</span> |  decay rate for session readdir caps leading to readdir throttle | Advanced | Float | 10 |  |  |  |  |  |  | RUNTIME | mds |  | The half-life for the session cap acquisition counter of caps acquired by readdir. This is used for throttling readdir requests from clients slow to release caps. |  |
| <span id="SP_mds_session_cap_acquisition_throttle">mds_session_cap_acquisition_throttle</span> |  throttle point for cap acquisition decay counter | Advanced | Uint | 500000 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_session_max_caps_throttle_ratio">mds_session_max_caps_throttle_ratio</span> |  ratio of mds_max_caps_per_client that client must exceed before readdir may be throttled by cap acquisition throttle | Advanced | Float | 1.1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_sessionmap_keys_per_op">mds_sessionmap_keys_per_op</span> |  number of omap keys to read from the SessionMap in one operation | Advanced | Uint | 1_K |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_shutdown_check">mds_shutdown_check</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_skip_ino">mds_skip_ino</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_sleep_rank_change">mds_sleep_rank_change</span> |   | Dev | Float | 0.0 |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_mds_snap_max_uid">mds_snap_max_uid</span> |  maximum uid of client to perform snapshots | Advanced | Uint | 4294967294 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_snap_min_uid">mds_snap_min_uid</span> |  minimum uid of client to perform snapshots | Advanced | Uint | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_snap_rstat">mds_snap_rstat</span> |  enabled nested rstat for snapshots | Advanced | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_standby_replay_damaged">mds_standby_replay_damaged</span> |   | Dev | Bool | False |  |  |  |  |  |  | RUNTIME |  |  |  |  |
| <span id="SP_mds_symlink_recovery">mds_symlink_recovery</span> |  Stores symlink target on the first data object of symlink file. Allows recover of symlink using recovery tools. | Advanced | Bool | True |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_task_status_update_interval">mds_task_status_update_interval</span> |  task status update interval to manager | Dev | Float | 2 |  |  |  |  |  |  |  | mds |  | interval (in seconds) for sending mds task status to ceph manager |  |
| <span id="SP_mds_thrash_exports">mds_thrash_exports</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_thrash_fragments">mds_thrash_fragments</span> |   | Dev | Int | 0 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_tick_interval">mds_tick_interval</span> |  time in seconds between upkeep tasks | Advanced | Float | 5 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_valgrind_exit">mds_valgrind_exit</span> |   | Dev | Bool | False |  |  |  |  |  |  | RUNTIME | mds |  |  |  |
| <span id="SP_mds_verify_backtrace">mds_verify_backtrace</span> |   | Dev | Uint | 1 |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_verify_scatter">mds_verify_scatter</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_wipe_ino_prealloc">mds_wipe_ino_prealloc</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
| <span id="SP_mds_wipe_sessions">mds_wipe_sessions</span> |   | Dev | Bool | False |  |  |  |  |  |  |  | mds |  |  |  |
